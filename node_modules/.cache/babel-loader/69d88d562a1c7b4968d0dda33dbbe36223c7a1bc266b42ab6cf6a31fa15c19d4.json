{"ast":null,"code":"import'../App.css';/**\n * プレビュー用canvas描画\n */export async function getPng(text,font,color,borderColor,borderWidth){return new Promise((resolve,reject)=>{try{const canvas=document.createElement('canvas');canvas.width=128;canvas.height=128;const textLine=text.split('\\n');const fontSize=canvas.width/textLine.length;const ctx=canvas.getContext('2d');ctx.fillStyle=color;ctx.strokeStyle=borderColor;ctx.lineWidth=borderWidth;ctx.lineJoin='round';ctx.textBaseline='top';ctx.font=`${fontSize}px '${font.name}', serif`;// stroke\nif(borderWidth>0){textLine.forEach((line,i)=>{ctx.save();//const lineWidth = ctx.measureText(line).width;\nctx.strokeText(line,canvas.width*0.05,fontSize*0.9*i+fontSize*0.05,canvas.width*0.9);ctx.restore();});}// fill\ntextLine.forEach((line,i)=>{ctx.save();ctx.fillText(line,canvas.width*0.05,fontSize*0.9*i+fontSize*0.05,canvas.width*0.9);ctx.restore();});resolve(canvas.toDataURL());}catch(e){reject();}});}","map":{"version":3,"names":["getPng","text","font","color","borderColor","borderWidth","Promise","resolve","reject","canvas","document","createElement","width","height","textLine","split","fontSize","length","ctx","getContext","fillStyle","strokeStyle","lineWidth","lineJoin","textBaseline","name","forEach","line","i","save","strokeText","restore","fillText","toDataURL","e"],"sources":["/Volumes/EXTHDD/Macmini/misskey/emojiCreator/pagesTest/src/utils/EmojiRenderer.ts"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport '../App.css';\nimport { Font } from '../components/FontButton';\n\n/**\n * プレビュー用canvas描画\n */\nexport async function getPng(text: string, font: Font, color: string, borderColor: string, borderWidth: number): Promise<string> {\n  return new Promise((resolve, reject) => {\n    try {\n      const canvas = document.createElement('canvas');\n      canvas.width = 128;\n      canvas.height = 128;\n\n      const textLine = text.split('\\n');\n      const fontSize = canvas.width / textLine.length;\n\n      const ctx = canvas.getContext('2d')!;\n      ctx.fillStyle = color;\n      ctx.strokeStyle = borderColor;\n      ctx.lineWidth = borderWidth;\n      ctx.lineJoin = 'round';\n      ctx.textBaseline = 'top';\n      ctx.font = `${fontSize}px '${font.name}', serif`;\n\n      // stroke\n      if (borderWidth > 0) {\n        textLine.forEach((line, i) => {\n          ctx.save();\n          //const lineWidth = ctx.measureText(line).width;\n          ctx.strokeText(line, canvas.width * 0.05, (fontSize * 0.9 * i) + fontSize * 0.05, canvas.width * 0.9);\n          ctx.restore();\n        });\n      }\n\n      // fill\n      textLine.forEach((line, i) => {\n        ctx.save();\n        ctx.fillText(line, canvas.width * 0.05, (fontSize * 0.9 * i) + fontSize * 0.05, canvas.width * 0.9);\n        ctx.restore();\n      });\n      resolve(canvas.toDataURL());\n    } catch (e) {\n      reject();\n    }\n  });\n}"],"mappings":"AACA,MAAO,YAAY,CAGnB;AACA;AACA,GACA,MAAO,eAAe,CAAAA,MAAMA,CAACC,IAAY,CAAEC,IAAU,CAAEC,KAAa,CAAEC,WAAmB,CAAEC,WAAmB,CAAmB,CAC/H,MAAO,IAAI,CAAAC,OAAO,CAAC,CAACC,OAAO,CAAEC,MAAM,GAAK,CACtC,GAAI,CACF,KAAM,CAAAC,MAAM,CAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC,CAC/CF,MAAM,CAACG,KAAK,CAAG,GAAG,CAClBH,MAAM,CAACI,MAAM,CAAG,GAAG,CAEnB,KAAM,CAAAC,QAAQ,CAAGb,IAAI,CAACc,KAAK,CAAC,IAAI,CAAC,CACjC,KAAM,CAAAC,QAAQ,CAAGP,MAAM,CAACG,KAAK,CAAGE,QAAQ,CAACG,MAAM,CAE/C,KAAM,CAAAC,GAAG,CAAGT,MAAM,CAACU,UAAU,CAAC,IAAI,CAAE,CACpCD,GAAG,CAACE,SAAS,CAAGjB,KAAK,CACrBe,GAAG,CAACG,WAAW,CAAGjB,WAAW,CAC7Bc,GAAG,CAACI,SAAS,CAAGjB,WAAW,CAC3Ba,GAAG,CAACK,QAAQ,CAAG,OAAO,CACtBL,GAAG,CAACM,YAAY,CAAG,KAAK,CACxBN,GAAG,CAAChB,IAAI,CAAG,GAAGc,QAAQ,OAAOd,IAAI,CAACuB,IAAI,UAAU,CAEhD;AACA,GAAIpB,WAAW,CAAG,CAAC,CAAE,CACnBS,QAAQ,CAACY,OAAO,CAAC,CAACC,IAAI,CAAEC,CAAC,GAAK,CAC5BV,GAAG,CAACW,IAAI,CAAC,CAAC,CACV;AACAX,GAAG,CAACY,UAAU,CAACH,IAAI,CAAElB,MAAM,CAACG,KAAK,CAAG,IAAI,CAAGI,QAAQ,CAAG,GAAG,CAAGY,CAAC,CAAIZ,QAAQ,CAAG,IAAI,CAAEP,MAAM,CAACG,KAAK,CAAG,GAAG,CAAC,CACrGM,GAAG,CAACa,OAAO,CAAC,CAAC,CACf,CAAC,CAAC,CACJ,CAEA;AACAjB,QAAQ,CAACY,OAAO,CAAC,CAACC,IAAI,CAAEC,CAAC,GAAK,CAC5BV,GAAG,CAACW,IAAI,CAAC,CAAC,CACVX,GAAG,CAACc,QAAQ,CAACL,IAAI,CAAElB,MAAM,CAACG,KAAK,CAAG,IAAI,CAAGI,QAAQ,CAAG,GAAG,CAAGY,CAAC,CAAIZ,QAAQ,CAAG,IAAI,CAAEP,MAAM,CAACG,KAAK,CAAG,GAAG,CAAC,CACnGM,GAAG,CAACa,OAAO,CAAC,CAAC,CACf,CAAC,CAAC,CACFxB,OAAO,CAACE,MAAM,CAACwB,SAAS,CAAC,CAAC,CAAC,CAC7B,CAAE,MAAOC,CAAC,CAAE,CACV1B,MAAM,CAAC,CAAC,CACV,CACF,CAAC,CAAC,CACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}