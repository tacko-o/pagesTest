{"ast":null,"code":"import { useState } from 'react';\nimport '../App.css';\nconst EmojiRenderer = () => {\n  var _s = $RefreshSig$();\n  /**\n   * プレビュー用canvas描画\n   */\n  const getPng = async (text, color, font) => {\n    _s();\n    const [textLine, setTextLine] = useState(text.split('\\n'));\n    return new Promise((resolve, reject) => {\n      try {\n        const fontSize = 32;\n        const canvas = document.createElement('canvas');\n        canvas.width = 128;\n        canvas.height = 128;\n        const ctx = canvas.getContext('2d');\n        ctx.fillStyle = color;\n        ctx.font = `${fontSize}px '${font.name}', serif`;\n\n        // draw\n        const textLine = text.split('\\n');\n        textLine.forEach((line, i) => {\n          ctx.save();\n          const lineWidth = ctx.measureText(line).width;\n          ctx.scale(canvas.width / lineWidth, 4 / textLine.length);\n          ctx.fillText(line, 0, (fontSize - 4) * (i + 1));\n          ctx.restore();\n        });\n        resolve(canvas.toDataURL());\n      } catch (e) {\n        reject();\n      }\n    });\n  };\n  _s(getPng, \"msijiuh9o0uxpXS7geOlQE5bmTE=\");\n};\n_c = EmojiRenderer;\nexport default EmojiRenderer;\nvar _c;\n$RefreshReg$(_c, \"EmojiRenderer\");","map":{"version":3,"names":["useState","EmojiRenderer","_s","$RefreshSig$","getPng","text","color","font","textLine","setTextLine","split","Promise","resolve","reject","fontSize","canvas","document","createElement","width","height","ctx","getContext","fillStyle","name","forEach","line","i","save","lineWidth","measureText","scale","length","fillText","restore","toDataURL","e","_c","$RefreshReg$"],"sources":["/Volumes/EXTHDD/Macmini/misskey/emojiCreator/pagesTest/src/utils/EmojiRenderer.ts"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport '../App.css';\nimport { Font } from '../components/FontButton';\n\nconst EmojiRenderer = () => {\n  /**\n   * プレビュー用canvas描画\n   */\n  const getPng = async (text: string, color: string, font: Font): Promise<string> => {\n    const [textLine, setTextLine] = useState(text.split('\\n'));\n    return new Promise((resolve, reject) => {\n      try {\n        const fontSize = 32;\n        const canvas = document.createElement('canvas');\n        canvas.width = 128;\n        canvas.height = 128;\n        const ctx = canvas.getContext('2d')!;\n        ctx.fillStyle = color;\n        ctx.font = `${fontSize}px '${font.name}', serif`;\n\n        // draw\n        const textLine = text.split('\\n');\n        textLine.forEach((line, i) => {\n          ctx.save();\n          const lineWidth = ctx.measureText(line).width;\n          ctx.scale(canvas.width / lineWidth, 4 / textLine.length);\n          ctx.fillText(line, 0, (fontSize - 4) * (i + 1));\n          ctx.restore();\n        });\n        resolve(canvas.toDataURL());\n      } catch (e) {\n        reject();\n      }\n    });\n  }\n}\n\nexport default EmojiRenderer;\n"],"mappings":"AAAA,SAAoBA,QAAQ,QAAQ,OAAO;AAC3C,OAAO,YAAY;AAGnB,MAAMC,aAAa,GAAGA,CAAA,KAAM;EAAA,IAAAC,EAAA,GAAAC,YAAA;EAC1B;AACF;AACA;EACE,MAAMC,MAAM,GAAG,MAAAA,CAAOC,IAAY,EAAEC,KAAa,EAAEC,IAAU,KAAsB;IAAAL,EAAA;IACjF,MAAM,CAACM,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAACK,IAAI,CAACK,KAAK,CAAC,IAAI,CAAC,CAAC;IAC1D,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACtC,IAAI;QACF,MAAMC,QAAQ,GAAG,EAAE;QACnB,MAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;QAC/CF,MAAM,CAACG,KAAK,GAAG,GAAG;QAClBH,MAAM,CAACI,MAAM,GAAG,GAAG;QACnB,MAAMC,GAAG,GAAGL,MAAM,CAACM,UAAU,CAAC,IAAI,CAAE;QACpCD,GAAG,CAACE,SAAS,GAAGhB,KAAK;QACrBc,GAAG,CAACb,IAAI,GAAG,GAAGO,QAAQ,OAAOP,IAAI,CAACgB,IAAI,UAAU;;QAEhD;QACA,MAAMf,QAAQ,GAAGH,IAAI,CAACK,KAAK,CAAC,IAAI,CAAC;QACjCF,QAAQ,CAACgB,OAAO,CAAC,CAACC,IAAI,EAAEC,CAAC,KAAK;UAC5BN,GAAG,CAACO,IAAI,CAAC,CAAC;UACV,MAAMC,SAAS,GAAGR,GAAG,CAACS,WAAW,CAACJ,IAAI,CAAC,CAACP,KAAK;UAC7CE,GAAG,CAACU,KAAK,CAACf,MAAM,CAACG,KAAK,GAAGU,SAAS,EAAE,CAAC,GAAGpB,QAAQ,CAACuB,MAAM,CAAC;UACxDX,GAAG,CAACY,QAAQ,CAACP,IAAI,EAAE,CAAC,EAAE,CAACX,QAAQ,GAAG,CAAC,KAAKY,CAAC,GAAG,CAAC,CAAC,CAAC;UAC/CN,GAAG,CAACa,OAAO,CAAC,CAAC;QACf,CAAC,CAAC;QACFrB,OAAO,CAACG,MAAM,CAACmB,SAAS,CAAC,CAAC,CAAC;MAC7B,CAAC,CAAC,OAAOC,CAAC,EAAE;QACVtB,MAAM,CAAC,CAAC;MACV;IACF,CAAC,CAAC;EACJ,CAAC;EAAAX,EAAA,CA1BKE,MAAM;AA2Bd,CAAC;AAAAgC,EAAA,GA/BKnC,aAAa;AAiCnB,eAAeA,aAAa;AAAC,IAAAmC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}