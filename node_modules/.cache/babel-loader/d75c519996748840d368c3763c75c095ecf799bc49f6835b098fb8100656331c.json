{"ast":null,"code":"import React,{useEffect,useState}from'react';import Fonts from'./resources/fonts.json';import ConvertList from'./resources/letter_convert_list.json';import'./App.css';import FontButton from'./components/FontButton';import NotePreview from'./components/NotePreview';import{getYOffset}from'./utils/EmojiRenderer';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Main=()=>{/** 絵文字名変換表 */const convertList=ConvertList;/** 絵文字にする文字列 *///const [text, setText] = useState('おふとん\\nかけてあげ\\nましょうね');\nconst[text,setText]=useState('てすと');/** 選択中のフォント名 */const[selectedFont,setSelectedFont]=useState(Fonts[0]);/** 文字色 */const[color,setColor]=useState('#000000');/** 境界線色 */const[borderColor,setBorderColor]=useState('#ffffff');/** 色 */const[borderWidth,setborderWidth]=useState(10);/** 絵文字画像 */const[png,setPng]=useState('');useEffect(()=>{(async()=>{const yOffset=getYOffset(selectedFont);console.log(yOffset);//setPng(await getPng(text, selectedFont, color, yOffset, borderColor, borderWidth));\nsetPng(yOffset);})();},[text,selectedFont,color]);/**\n   * 最大級サーバー向け文字変換関数\n   */const createEmojiName=()=>{let convertedText=text;// 変換表に基づいて変換\nObject.keys(convertList).forEach(letter=>{convertedText.replaceAll(letter,convertList[letter]);});// 長音記号は前の文字と一致させる\nlet i=0;while(convertedText.indexOf(\"ー\",i)>-1){const preLetter=convertedText[convertedText.indexOf(\"ー\",i)-1];console.log(preLetter);convertedText=convertedText.replace(\"ー\",preLetter);i++;}};/**\n   * テキストエリア要素変更イベント\n   * @param e textarea要素変更イベント\n   */const handleTextChange=async e=>{setText(e.target.value);};/**\n   * フォント選択ボタンクリックイベント\n   * @param e イベントハンドラ\n   */const fontButtonOnClick=font=>{setSelectedFont(font);};return/*#__PURE__*/_jsxs(\"div\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexWrap:'wrap',margin:'15px 0'},children:/*#__PURE__*/_jsx(\"span\",{className:\"emoji-preview\",children:png&&/*#__PURE__*/_jsx(\"img\",{alt:\"result\",src:png})})}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',display:'flex',flexWrap:'wrap'},children:[png&&/*#__PURE__*/_jsx(NotePreview,{png:png}),png&&/*#__PURE__*/_jsx(NotePreview,{png:png,dark:true})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexWrap:'wrap',margin:'15px 0'},children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"text\",style:{fontFamily:`${selectedFont.name}`},value:text,onChange:handleTextChange}),/*#__PURE__*/_jsx(FontButton,{text:text,fonts:Fonts,onClick:fontButtonOnClick})]})]});};const App=()=>{return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"link\",{rel:\"preconnect\",href:\"https://fonts.googleapis.com\"}),/*#__PURE__*/_jsx(\"link\",{href:`https://fonts.googleapis.com/css2?${Fonts.map(font=>'family='+font.name.replaceAll(' ','+')).join('&')}&display=swap`,rel:\"stylesheet\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"title\",children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold'},children:\"EGMi\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'0.5em',marginLeft:'1em'},children:\"- Emoji Generator for Misskey -\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"main\",children:/*#__PURE__*/_jsx(Main,{})})]});};export default App;","map":{"version":3,"names":["React","useEffect","useState","Fonts","ConvertList","FontButton","NotePreview","getYOffset","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Main","convertList","text","setText","selectedFont","setSelectedFont","color","setColor","borderColor","setBorderColor","borderWidth","setborderWidth","png","setPng","yOffset","console","log","createEmojiName","convertedText","Object","keys","forEach","letter","replaceAll","i","indexOf","preLetter","replace","handleTextChange","e","target","value","fontButtonOnClick","font","className","children","style","display","flexWrap","margin","alt","src","width","dark","fontFamily","name","onChange","fonts","onClick","App","rel","href","map","join","fontWeight","fontSize","marginLeft"],"sources":["/Users/tadashi_o/ゆうた/other/pagesTest/src/App.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Fonts from './resources/fonts.json'\nimport ConvertList from './resources/letter_convert_list.json'\nimport './App.css';\nimport FontButton, { Font } from './components/FontButton';\nimport NotePreview from './components/NotePreview';\nimport { getPng, getYOffset } from './utils/EmojiRenderer';\n\nconst Main = () => {\n  /** 絵文字名変換表 */\n  const convertList: { [key: string]: string } = ConvertList;\n\n  /** 絵文字にする文字列 */\n  //const [text, setText] = useState('おふとん\\nかけてあげ\\nましょうね');\n  const [text, setText] = useState('てすと');\n\n  /** 選択中のフォント名 */\n  const [selectedFont, setSelectedFont] = useState(Fonts[0]);\n\n  /** 文字色 */\n  const [color, setColor] = useState('#000000');\n\n  /** 境界線色 */\n  const [borderColor, setBorderColor] = useState('#ffffff');\n\n  /** 色 */\n  const [borderWidth, setborderWidth] = useState(10);\n\n  /** 絵文字画像 */\n  const [png, setPng] = useState('');\n\n  useEffect(() => {\n    (async () => {\n      const yOffset = getYOffset(selectedFont);\n      console.log(yOffset);\n      //setPng(await getPng(text, selectedFont, color, yOffset, borderColor, borderWidth));\n      setPng(yOffset);\n    })();\n  }, [text, selectedFont, color]);\n\n  /**\n   * 最大級サーバー向け文字変換関数\n   */\n  const createEmojiName = () => {\n    let convertedText = text;\n\n    // 変換表に基づいて変換\n    Object.keys(convertList).forEach((letter: string) => {\n      convertedText.replaceAll(letter, convertList[letter]);\n    });\n\n    // 長音記号は前の文字と一致させる\n    let i = 0;\n    while (convertedText.indexOf(\"ー\", i) > -1) {\n      const preLetter = convertedText[convertedText.indexOf(\"ー\", i) - 1];\n      console.log(preLetter);\n      convertedText = convertedText.replace(\"ー\", preLetter);\n      i++;\n    }\n  }\n  /**\n   * テキストエリア要素変更イベント\n   * @param e textarea要素変更イベント\n   */\n  const handleTextChange = async (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setText(e.target.value);\n  };\n\n  /**\n   * フォント選択ボタンクリックイベント\n   * @param e イベントハンドラ\n   */\n  const fontButtonOnClick = (font: Font) => {\n    setSelectedFont(font);\n  }\n\n  return (\n    <div className=\"App-header\">\n      <div style={{ display: 'flex', flexWrap: 'wrap', margin: '15px 0' }}>\n        {/* 画像プレビュー */}\n        <span className='emoji-preview'>\n          {png && <img alt=\"result\" src={png} />}\n        </span>\n      </div>\n      <div style={{ width: '100%', display: 'flex', flexWrap: 'wrap' }}>\n        {/* ノートプレビュー */}\n        {png && <NotePreview png={png} />}\n        {png && <NotePreview png={png} dark />}\n      </div>\n      <div style={{ display: 'flex', flexWrap: 'wrap', margin: '15px 0' }}>\n      {/* テキスト */}\n      <textarea className='text' style={{ fontFamily: `${selectedFont.name}` }} value={text} onChange={handleTextChange} />\n      { /* フォントボタン群 */}\n      <FontButton text={text} fonts={Fonts} onClick={fontButtonOnClick} />\n      </div>\n    </div>\n  );\n}\n\nconst App = () => {\n  return (\n    <>\n      {/* フォント読み込み */}\n      <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\" />\n      <link href={`https://fonts.googleapis.com/css2?${Fonts.map((font) => 'family=' + font.name.replaceAll(' ', '+')).join('&')}&display=swap`} rel=\"stylesheet\" />\n      <div className='title'><span style={{ fontWeight: 'bold' }}>EGMi</span>\n        <span style={{ fontSize: '0.5em', marginLeft: '1em' }}>- Emoji Generator for Misskey -</span>\n      </div>\n      <div className=\"main\">\n        <Main />\n      </div>\n    </>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}